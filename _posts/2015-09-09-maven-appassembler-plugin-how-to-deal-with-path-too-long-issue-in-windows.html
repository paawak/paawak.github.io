---
layout: post
background: '/assets/banner/HemkutHill_12.jpg'
status: publish
published: true
title: 'Maven appassembler plugin: How to deal with path too long issue in Windows'
author:
  name: Palash Ray
  
  email: paawak@gmail.com
  url: 'https://www.linkedin.com/in/palash-ray/'


wordpress_id: 757
wordpress_url: http://palashray.com/?p=757
date: '2015-09-09 22:56:49 +0530'
date_gmt: '2015-09-10 02:56:49 +0530'
categories:
- maven
tags:
- maven
comments:
- id: 73
  author: Andrew Jobel
  author_email: andrewjobel56@gmail.com
  author_url: 'https://www.linkedin.com/in/palash-ray/'
  date: '2018-03-01 05:19:45 +0530'
  date_gmt: '2018-03-01 10:19:45 +0530'
  content: Long Path Tool is a software that will let you easily delete, copy or rename
    long path files.
---
<p>Windows sucks! We all know that. Recently, I had one more reason to crib. I am using the Maven appassembler plugin to create a <a href="http://palashray.com/maven-creating-deployable-distribution-part-1-using-the-appassembler-plugin/">deployable distribution</a> for my Rmi Server. I added a couple of more dependencies. And suddenly, the windows .bat file that is generated by the appassembler, suddenly wont launch. It was complaining that the path was too long!<br />
Well, I visited the plugin's <a href="http://www.mojohaus.org/appassembler/appassembler-maven-plugin/">home page</a> and after struggling for 3 hrs, I was none the wiser.<br />
Then, I chanced upon an article and with a little bit of tweaking, I was able to get it working. The trick is the following magic line:</p>
<blockquote><p>&nbsp;<useWildcardClassPath>true</useWildcardClassPath></p></blockquote>
<pre class="lang:xhtml decode:true"><plugin>
                                                <groupId>org.codehaus.mojo</groupId>
                                                <artifactId>appassembler-maven-plugin</artifactId>
                                                <version>1.6</version>
                                                <configuration>
                                                        <repositoryLayout>flat</repositoryLayout>
                                                        <repositoryName>libs</repositoryName>
                                                        <showConsoleWindow>true</showConsoleWindow>
                                                        <configurationDirectory>conf</configurationDirectory>
                                                        <includeConfigurationDirectoryInClasspath>true</includeConfigurationDirectoryInClasspath>
                                                        <useWildcardClassPath>true</useWildcardClassPath>
                                                        <platforms>
                                                                <platform>unix</platform>
                                                                <platform>windows</platform>
                                                        </platforms>
                                                        <programs>
                                                                <program>
                                                                        <mainClass>com.swayam.demo.rmi.server.core.SpringNonSecureRmiServer</mainClass>
                                                                        <id>run_rmi_server</id>
                                                                </program>
                                                        </programs>
                                                </configuration>
                                                <executions>
                                                        <execution>
                                                                <phase>package</phase>
                                                                <goals>
                                                                        <goal>assemble</goal>
                                                                </goals>
                                                        </execution>
                                                </executions>
                                        </plugin></pre>
<h1>Before the fix</h1>
<p>The run_rmi_server.bat looked like:</p>
<pre class="lang:batch decode:true ">     set CLASSPATH=&rdquo;%BASEDIR%&rdquo;etc;&rdquo;%REPO%&rdquo;rmi-api-1.0.jar;&rdquo;%REPO%&rdquo;log4j-1.2.14.jar;&rdquo;%REPO%&rdquo;slf4j-api-1.5.8.jar;&rdquo;%REPO%&rdquo;jcl-over-slf4j-1.5.8.jar;&rdquo;%REPO%&rdquo;slf4j-log4j12-1.5.8.jar;&rdquo;%REPO%&rdquo;spring-core-4.0.2.RELEASE.jar;&rdquo;%REPO%&rdquo;spring-context-4.0.2.RELEASE.jar;&rdquo;%REPO%&rdquo;spring-aop-4.0.2.RELEASE.jar;&rdquo;%REPO%&rdquo;aopalliance-1.0.jar;&rdquo;%REPO%&rdquo;spring-beans-4.0.2.RELEASE.jar;&rdquo;%REPO%&rdquo;spring-expression-4.0.2.RELEASE.jar;&rdquo;%REPO%&rdquo;jsk-platform-2.2.2.jar;&rdquo;%REPO%&rdquo;jsk-resources-2.2.2.jar;&rdquo;%REPO%&rdquo;jsk-lib-2.2.2.jar;&rdquo;%REPO%&rdquo;reggie-2.2.2.jar;&rdquo;%REPO%&rdquo;start-2.2.2.jar;&rdquo;%REPO%&rdquo;mysql-connector-java-5.1.27.jar;&rdquo;%REPO%&rdquo;rmi-server-1.0.jar
    set ENDORSED_DIR=
    if NOT &ldquo;%ENDORSED_DIR%&rdquo; == &ldquo;&rdquo; set CLASSPATH=&rdquo;%BASEDIR%&rdquo;%ENDORSED_DIR%*;%CLASSPATH%
    if NOT &ldquo;%CLASSPATH_PREFIX%&rdquo; == &ldquo;&rdquo; set CLASSPATH=%CLASSPATH_PREFIX%;%CLASSPATH%
    @REM Reaching here means variables are defined and arguments have been captured
    :endInit
    %JAVACMD% %JAVA_OPTS% -classpath %CLASSPATH% -Dapp.name=&rdquo;run_rmi_server&rdquo; -Dapp.repo=&rdquo;%REPO%&rdquo; -Dapp.home=&rdquo;%BASEDIR%&rdquo; -Dbasedir=&rdquo;%BASEDIR%&rdquo; com.swayam.demo.rmi.server.core.SpringNonSecureRmiServer %CMD_LINE_ARGS%
    if %ERRORLEVEL% NEQ 0 goto error
    goto end</pre>
<h1>After the fix</h1>
<p>The run_rmi_server.bat looks like:</p>
<pre class="lang:batch decode:true ">set CLASSPATH="%BASEDIR%"etc;"%REPO%"*
set ENDORSED_DIR=
if NOT "%ENDORSED_DIR%" == "" set CLASSPATH="%BASEDIR%"%ENDORSED_DIR%*;%CLASSPATH%
if NOT "%CLASSPATH_PREFIX%" == "" set CLASSPATH=%CLASSPATH_PREFIX%;%CLASSPATH%
@REM Reaching here means variables are defined and arguments have been captured
:endInit
%JAVACMD% %JAVA_OPTS%  -classpath %CLASSPATH% -Dapp.name="run_rmi_server" -Dapp.repo="%REPO%" -Dapp.home="%BASEDIR%" -Dbasedir="%BASEDIR%" com.swayam.demo.rmi.server.core.SpringNonSecureRmiServer %CMD_LINE_ARGS%
if %ERRORLEVEL% NEQ 0 goto error
goto end</pre>
<p>Note that the path has been shortened by using *. This has been introduced in JDK 6: <a href="https://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html">https://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html</a></p>
