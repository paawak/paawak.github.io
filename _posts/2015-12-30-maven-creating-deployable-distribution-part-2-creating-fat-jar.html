---
layout: post
background: '/assets/banner/HemkutHill_12.jpg'
status: publish
published: true
title: 'Maven: Creating deployable distribution: Part 2: creating fat jar'
author:
  name: Palash Ray
  
  email: paawak@gmail.com
  url: 'https://www.linkedin.com/in/palash-ray/'


wordpress_id: 804
wordpress_url: http://palashray.com/?p=804
date: '2015-12-30 00:12:57 +0530'
date_gmt: '2015-12-30 05:12:57 +0530'
categories:
- maven
tags:
- build
- maven
comments: []
---
<p>In the <a href="http://palashray.com/maven-creating-deployable-distribution-part-1-using-the-appassembler-plugin/">Part 1</a> of this, we had seen how to use the appassembler plugin to create a distribution tar. In this increment, we will see how to use the Maven assembly plugin to create a uber jar or fat jar. A uber jar or fat jar is a single jar having the contents of all the dependencies needed for the project. Again, we will be using the&nbsp;<a href="https://github.com/paawak/blog/tree/master/code/maven-distribution-example">maven-distribution-example</a> as reference. This project would need the project&nbsp;<a href="https://github.com/paawak/blog/tree/master/code/jini/unsecure/plain/rmi-service-api">rmi-service-api</a> to compile. We have created a profile called <em>uber-jar</em>:</p>
<pre class="lang:xhtml decode:true ">		<profile>
			<id>uber-jar</id>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-assembly-plugin</artifactId>
						<version>2.6</version>
						<executions>
							<execution>
								<id>create-uber-jar</id>
								<phase>package</phase>
								<goals>
									<goal>single</goal>
								</goals>
								<configuration>
									<descriptorRefs>
										<descriptorRef>jar-with-dependencies</descriptorRef>
									</descriptorRefs>
								</configuration>
							</execution>
							<execution>
								<id>assemble-all</id>
								<phase>package</phase>
								<goals>
									<goal>single</goal>
								</goals>
								<configuration>
									<descriptor>src/assembly/uber-jar-assembly-descriptor.xml</descriptor>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile></pre>
<p>The assembly plugin uses a pre-fabricated descriptor called <strong>jar-with-dependencies</strong>. This would condense all dependencies into the single fat jar.<br />
Note there are 2 executions. The first one creates the uber jar and the second one takes that uber jar and the readme.txt and creates a zip file. It does this by using the below assembly descriptor (uber-jar-assembly-descriptor.xml):</p>
<pre class="lang:xhtml decode:true "><assembly
	xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
	<id>uber-jar</id>
	<formats>
		<format>zip</format>
	</formats>
	<includeBaseDirectory>false</includeBaseDirectory>
	<fileSets>
		<fileSet>
			<directory>${project.basedir}/src/static</directory>
			<outputDirectory>/</outputDirectory>
			<includes>
				<include>readme.txt</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>${project.build.directory}</directory>
			<outputDirectory>/</outputDirectory>
			<includes>
				<include>${project.name}-${project.version}-jar-with-dependencies.jar</include>
			</includes>
		</fileSet>
	</fileSets>
</assembly></pre>
<p>The uber jar can be generated by:</p>
<blockquote><p>mvn clean package -P uber-jar</p></blockquote>
<p>The sources can be found here: <a href="https://github.com/paawak/blog/tree/master/code/maven-ant-assembly-example">https://github.com/paawak/blog/tree/master/code/maven-ant-assembly-example</a></p>
